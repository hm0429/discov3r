(()=>{function e(){ethereum.selectedAddress?($("#address-label").text(ethereum.selectedAddress.substr(0,5)+"..."+ethereum.selectedAddress.slice(-4)),$(".only-logout").hide(),$(".only-login").show()):($("#address-label").text(""),$(".only-logout").show(),$(".only-login").hide())}async function n(){console.log("onWalletConnect"),await async function(){return await window.ethereum.request({method:"eth_chainId"})}()!==window.chainId&&await async function(e){await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})}(window.chainId).catch((async e=>{alert("Invalid chain")})),e()}function t(){ethereum.selectedAddress?n():async function(){console.log("onWalletDisconnect"),e()}()}async function o(){if(console.log("onClickButtonConnectWallet"),void 0===window.ethereum){if(window.confirm("Open Discov3r in the MetaMask app?"))return void function(){const e=`https://metamask.app.link/dapp/${location.hostname}${location.pathname}${location.search}`;location.href=e}();alert("MetaMask should be installed.")}const e=await ethereum.request({method:"eth_requestAccounts"});window.account=e[0],window.account&&n()}$((()=>{!async function(){!async function(){window.chainId="polygon"===(e=>{e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===n?null:decodeURIComponent(n[1].replace(/\+/g," "))})("chain")?"0x89":"0x13881"}(),async function(){$("#button-connect-wallet").on("click",o)}(),async function(){void 0!==window.ethereum&&(await ethereum.request({method:"eth_accounts"}),async function(){ethereum.on("connect",(e=>{})),ethereum.on("accountsChanged",(e=>{t()}))}(),t())}()}()}))})();